Часть 2. Дизайн сети
====================

В первых двух статьях я поднял вопрос автоматизации и набросал её фреймворк, во второй сделал отступление в виртуализацию сети, как первый подход к автоматизации настройки сервисов.
А теперь пришло время нарисовать схему физической сети.

Если вы не на короткой ноге с устройством сетей датацентров, то я настоятельно рекомендую начать со `статьи о них <https://linkmeup.ru/blog/480.html>`_.


Описанные в этой серии практики должны быть применимы к сети любого типа, любого масштаба с любым многообразием вендоров (нет). Однако нельзя описать универсальный пример применения этих подходов. Поэтому я остановлюсь на современной архитектуре сети ДЦ: `Фабрике Клоза <https://linkmeup.ru/blog/480.html>`_.
DCI сделаем на  MPLS L3VPN.
Поверх физической сети работает Overlay-сеть с хоста (это может быть VXLAN OpenStack'а или Tungsten Fabric или что угодно другое, что требует от сети только базовой IP-связности).

    .. figure:: https://fs.linkmeup.ru/images/adsm/2/kdpv_small.jpg
           :width: 800
           :align: center

В этом случае получится сравнительно простой сценарий для автоматизации, потому что имеем много оборудования, настраивающегося одинаковым образом. 
Мы выберем сферический ДЦ в вакууме:

* Одна версия дизайна везде
* Два вендора, образующих две плоскости сети
* Один ДЦ похож на другой как две капли воды

Пусть наш Сервис-Провайдер LAN_DC будет, например, хостить обучающие видео о выживании в застрявших лифтах.
В мегаполисах это пользуется бешенной популярностью, поэтому физических машин надо много.

Сначала я опишу сеть приблизительно такой, какой бы её хотелось видеть. А потом упрощу для лабы.


.. toctree::
   :maxdepth: 2
   :caption: Дизайн сети:

   topology.rst
   routing.rst
   ip_plan.rst
   lab.rst
   conclusion.rst